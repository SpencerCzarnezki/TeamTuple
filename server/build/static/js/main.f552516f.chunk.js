(this["webpackJsonpevents-ui"]=this["webpackJsonpevents-ui"]||[]).push([[0],{26:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(10),s=n.n(a),i=n(5),o=n(4),l=n(9),u=n(1);var d=function(){var e=Object(o.f)();return setTimeout((function(){e("/")}),4600),Object(u.jsx)("div",{children:Object(u.jsx)("img",{src:"https://media3.giphy.com/media/R7m04yMaGWVeE/200.webp?cid=ecf05e47gr1ezeiuu4mbfdl30e3yyjgind082de2yc38vl2d&rid=200.webp&ct=g",className:"img-fluid ",alt:"filler",style:{width:600}})})},j=n(2);var b=function(){return Object(u.jsx)("div",{className:"md-4",children:Object(u.jsx)(j.m,{className:"md-4",children:Object(u.jsx)(j.h,{showIndicators:!0,showControls:!0,fade:!0,light:!0,interval:1e4,children:Object(u.jsxs)(j.k,{children:[Object(u.jsxs)(j.l,{className:"active",children:[Object(u.jsx)(j.j,{src:"https://cdn.pixabay.com/photo/2014/03/26/20/55/trekking-299000_1280.jpg",className:"img-fluid"}),Object(u.jsx)(j.i,{children:"Find Local Events"})]}),Object(u.jsxs)(j.l,{className:"",children:[Object(u.jsx)(j.j,{src:"https://images.pexels.com/photos/6203563/pexels-photo-6203563.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",className:"img-fluid"}),Object(u.jsx)(j.i,{children:"Find Local Events"})]}),Object(u.jsxs)(j.l,{children:[Object(u.jsx)(j.j,{src:"https://images.pexels.com/photos/69773/uss-nimitz-basketball-silhouettes-sea-69773.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",className:"img-fluid"}),Object(u.jsx)(j.i,{children:"Find Local Events"})]}),Object(u.jsxs)(j.l,{children:[Object(u.jsx)(j.j,{src:"https://images.pexels.com/photos/1549196/pexels-photo-1549196.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940",className:"img-fluid"}),Object(u.jsx)(j.i,{children:"Find Local Events"})]})]})})})})},h=n(7),m=Object(r.createContext)(null),p=n(3),f=n.n(p),O=n(6),x="http://team07api-env.eba-jhiypzic.us-east-2.elasticbeanstalk.com:8080";function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,c=t;r<c.length;r++){var a=c[r];if(this.authorities.includes(a))return!0}return!1}function g(e){var t=e.jwt;localStorage.setItem("BG_TOKEN",t);var n=t.split("."),r=JSON.parse(atob(n[1])),c=JSON.parse(atob(n[1])),a={username:r.sub,id:c.id,authorities:r.authorities.split(",")};return a.hasAuthority=v,a}function w(){return(w=Object(O.a)(f.a.mark((function e(t){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)},e.next=3,fetch("".concat(x,"/authenticate"),n);case 3:if(200!==(r=e.sent).status){e.next=9;break}return e.next=7,r.json();case 7:return c=e.sent,e.abrupt("return",Promise.resolve(g(c)));case 9:return e.abrupt("return",Promise.reject("bad credentials"));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem("BG_TOKEN"),e.abrupt("return",Promise.resolve());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(O.a)(f.a.mark((function e(){var t,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("BG_TOKEN")){e.next=3;break}return e.abrupt("return",Promise.reject("bad credentials"));case 3:return n={method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}},e.next=6,fetch("".concat(x,"/refresh_token"),n);case 6:if(200!==(r=e.sent).status){e.next=12;break}return e.next=10,r.json();case 10:return c=e.sent,e.abrupt("return",Promise.resolve(g(c)));case 12:return e.abrupt("return",Promise.reject("bad credentials"));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(){var e=Object(r.useState)({username:"",password:""}),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),s=Object(i.a)(a,2),d=s[0],b=s[1],p=Object(o.f)(),f=Object(r.useContext)(m),O=function(e){var t=Object(h.a)({},n);t[e.target.name]=e.target.value,c(t)};return Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e){return w.apply(this,arguments)}(n).then((function(e){f.login(e),p("/")})).catch((function(){return b(!0)}))},className:"text-white",children:[Object(u.jsx)("h2",{className:"m-5 ",children:"Login"}),Object(u.jsx)("div",{className:"m-4 mb-2 w-25",children:Object(u.jsx)(j.p,{label:"Username",contrast:!0,id:"username",name:"username",type:"text",size:"lg",className:"form-control",required:!0,value:n.username,onChange:O})}),Object(u.jsx)("div",{className:" m-4 mb-2 w-25",children:Object(u.jsx)(j.p,{label:"Password",id:"password",contrast:!0,name:"password",type:"password",size:"lg",className:"form-control",required:!0,value:n.password,onChange:O})}),Object(u.jsxs)("div",{children:[Object(u.jsx)(l.b,{to:"/",className:"btn btn-warning me-2 m-4",children:"Cancel"}),Object(u.jsx)(j.a,{type:"submit",className:"btn btn-primary m-4",children:"Log In"})]}),d&&Object(u.jsx)("div",{className:"alert alert-danger m-4",children:"Bad credentials..."})]})},C="http://team07api-env.eba-jhiypzic.us-east-2.elasticbeanstalk.com:8080";function E(){return(E=Object(O.a)(f.a.mark((function e(t){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)},e.next=3,fetch("".concat(C,"/user/create"),n);case 3:if(201!==(r=e.sent).status){e.next=8;break}return e.abrupt("return",Promise.resolve());case 8:if(400!==r.status){e.next=13;break}return e.next=11,r.json();case 11:return c=e.sent,e.abrupt("return",Promise.reject({status:r.status,messages:c}));case 13:return e.abrupt("return",Promise.reject({status:r.status}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(O.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{Accept:"application/json"}},e.next=3,fetch("".concat(C,"/user/find/").concat(t),n);case 3:if(200!==(r=e.sent).status){e.next=10;break}return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",Promise.reject(r.status));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(){var e=Object(r.useState)({fname:"",lname:"",userName:"",email:"",password:"",confirmPassword:""}),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(),s=Object(i.a)(a,2),d=s[0],b=s[1],m=Object(o.f)(),p=function(e){var t=Object(h.a)({},n);t[e.target.name]=e.target.value,c(t)};return Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n.password!==n.confirmPassword?b("passwords do not match"):function(e){return E.apply(this,arguments)}(n).then((function(){return m("/login")})).catch((function(e){400===e.status?b(e.messages[0]):m("/error",e.toString())}))},className:"text-white m-3 ",children:[Object(u.jsx)("h2",{className:"m-3",children:"Register"}),Object(u.jsx)("div",{className:"mb-2 m-3 w-25",children:Object(u.jsx)(j.p,{type:"text",label:"First Name",contrast:!0,id:"fname",name:"fname",className:" w-50",value:n.fname,onChange:p})}),Object(u.jsx)("div",{className:"mb-2 m-3 w-25",children:Object(u.jsx)(j.p,{type:"text",contrast:!0,label:"Last Name",id:"lname",name:"lname",className:" m-3",value:n.lname,onChange:p})}),Object(u.jsx)("div",{className:"mb-2 m-3 w-25",children:Object(u.jsx)(j.p,{type:"text",label:"Username",contrast:!0,id:"userName",name:"userName",className:" m-3",required:!0,value:n.userName,onChange:p})}),Object(u.jsx)("div",{className:"mb-2 m-3 w-25",children:Object(u.jsx)(j.p,{type:"text",label:"Email Address",contrast:!0,id:"email",name:"email",className:" m-3",value:n.email,onChange:p})}),Object(u.jsx)("div",{className:"mb-2 m-3 w-25",children:Object(u.jsx)(j.p,{type:"password",label:"Password",contrast:!0,id:"password",name:"password",className:" m-3",required:!0,value:n.password,onChange:p})}),Object(u.jsx)("div",{className:"mb-2 m-3 w-25",children:Object(u.jsx)(j.p,{type:"password",contrast:!0,id:"confirmPassword",label:"Confirm Password",name:"confirmPassword",className:" m-3",required:!0,value:n.confirmPassword,onChange:p})}),d&&Object(u.jsx)("div",{className:"alert alert-danger",children:d}),Object(u.jsxs)("div",{className:"",children:[Object(u.jsx)(l.b,{to:"/",className:"btn btn-secondary m-3",children:"Cancel"}),Object(u.jsx)(j.a,{type:"submit",className:"btn btn-primary  m-3",children:"Save"})]})]})};var z=function(e){var t=e.attendees;return 0!==t.length?Object(u.jsxs)("div",{children:[Object(u.jsx)(j.o,{fas:!0,icon:"user"})," ",t&&t.user.fname," ",t&&t.user.lname,", ",t&&t.user.username]}):Object(u.jsx)("div",{style:{style:"italics"},children:"No Attendees"})},T="http://team07api-env.eba-jhiypzic.us-east-2.elasticbeanstalk.com:8080";function P(){return A.apply(this,arguments)}function A(){return(A=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/api/event"));case 2:if(200!==(t=e.sent).status){e.next=5;break}return e.abrupt("return",t.json());case 5:throw new Error("Could not fetch events");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/api/event/keyword/").concat(t));case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.json());case 5:throw new Error("Could not fetch Events by keyword");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return q.apply(this,arguments)}function q(){return(q=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/api/event/").concat(t));case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.json());case 5:throw new Error("Could not fetch Event");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/api/event/category/").concat(t));case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.json());case 5:throw new Error("Could not fetch Events");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/api/location/").concat(t));case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.json());case 5:throw new Error("Could not fetch Location");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return{method:e,headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)}}function M(e){return W.apply(this,arguments)}function W(){return(W=Object(O.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=J("POST",t),e.next=3,fetch("".concat(T,"/api/event"),n);case 3:if(201!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",r.json());case 6:throw new Error("Could not add event");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return G.apply(this,arguments)}function G(){return(G=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.attendees=[],n=J("PUT",t),e.next=4,fetch("".concat(T,"/api/event/").concat(t.id),n);case 4:if(204===e.sent.status){e.next=7;break}throw new Error("Could not update event");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return K.apply(this,arguments)}function K(){return(K=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.id>0?B(t):M(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/api/event/").concat(t),{method:"DELETE"});case 2:if(204===e.sent.status){e.next=5;break}throw new Error("Could not delete event");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return H.apply(this,arguments)}function H(){return(H=Object(O.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=J("POST",t),e.next=3,fetch("".concat(T,"/api/resources"),n);case 3:if(201!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",r.json());case 6:throw new Error("Could not add resource");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return X.apply(this,arguments)}function X(){return(X=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/api/resources/amenities/").concat(t));case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.json());case 5:throw new Error("Could not fetch resources");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/api/resources/").concat(t),{method:"DELETE"});case 2:if(204===e.sent.status){e.next=5;break}throw new Error("Could not delete event");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=function(e){var t=e.resources;return 0!==t.length?Object(u.jsx)("div",{children:t&&t.resource}):Object(u.jsx)("div",{style:{style:"italics"},children:"No Attendees"})},ee="http://team07api-env.eba-jhiypzic.us-east-2.elasticbeanstalk.com:8080";function te(){return(te=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ee,"/api/event/user/find/user/").concat(t));case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.json());case 5:throw new Error("Could not fetch eventIds");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t){return{method:e,headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)}}function re(){return(re=Object(O.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ne("POST",t),e.next=3,fetch("".concat(ee,"/api/event/user/add"),n);case 3:if(201!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",r.json());case 6:throw new Error("Could not add user to event");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=Object(O.a)(f.a.mark((function e(t,n){var r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"DELETE"},e.next=3,fetch("".concat(ee,"/api/event/user/").concat(t,"/").concat(n),r);case 3:if(204!==(c=e.sent).status){e.next=6;break}return e.abrupt("return",c.json());case 6:throw new Error("Could not delete user from event");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ae={eventId:"",userId:""};var se=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),s=Object(i.a)(a,2),l=s[0],d=s[1],b=Object(r.useState)([]),p=Object(i.a)(b,2),f=p[0],O=p[1],x=Object(r.useContext)(m),v=Object(o.f)(),g=Object(o.g)().eventId,w=Object(r.useState)([]),y=Object(i.a)(w,2),N=y[0],k=y[1],C=Object(r.useState)([]),E=Object(i.a)(C,2),I=E[0],T=E[1],P=Object(r.useState)(ae),A=Object(i.a)(P,2),L=A[0],q=A[1],U=Object(r.useState)(!1),J=Object(i.a)(U,2),M=J[0],W=J[1],G=Object(r.useState)(!1),_=Object(i.a)(G,2),K=_[0],R=_[1];return Object(r.useEffect)((function(){var e,t;if(0!==f.indexOf("h")&&(g&&D(g).then((function(e){return c(e)})).catch((function(e){return e.toString()})),function(e){return F.apply(this,arguments)}(n.eventLocationId).then((function(e){return d(e)})).catch((function(e){return e.toString()})),0!==l.length&&O((e=l.address,t=l.city,"https://maps.google.com/maps?q="+e+" "+t+"k&t=&z=13&ie=UTF8&iwloc=&output=embed")),function(e){return S.apply(this,arguments)}(n.organizerId).then((function(e){return k(e)})).catch((function(e){return e.toString()})),V(n.eventLocationId).then((function(e){return T(e)})).catch((function(e){return e.toString()}))),n.attendees&&x.user)for(var r=0;r<n.attendees.length;r++)if(n.attendees[r].user.userId===x.user.id){Object(h.a)({},M);!0,W(true)}}),[g,l,n,N,I,x,M,f]),Object(u.jsxs)("div",{className:"col w-auto",children:[Object(u.jsx)("div",{className:"card h-100",children:Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:n.title}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col",children:[Object(u.jsx)("strong",{children:"When:"})," "]}),Object(u.jsx)("div",{className:"col",children:n.date})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col",children:[Object(u.jsx)("strong",{children:"Duration:"})," "]}),Object(u.jsx)("div",{className:"col",children:n.duration})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col",children:[Object(u.jsx)("strong",{children:"Category:"})," "]}),Object(u.jsx)("div",{className:"col",children:n.category})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col",children:[Object(u.jsx)("strong",{children:"Description:"})," "]}),Object(u.jsx)("div",{className:"col",children:n.description})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col",children:[Object(u.jsx)("strong",{children:"Location:"})," "]}),Object(u.jsxs)("div",{className:"col",children:[l.address,", ",l.city,", ",l.state,", ",l.zipcode]})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col",children:[Object(u.jsx)("strong",{children:"Number of spots filled:"})," "]}),Object(u.jsxs)("div",{className:"col",children:[" ",n.attendees&&n.attendees.length,"/",n.capacity]})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col",children:[Object(u.jsx)("strong",{children:"Organizer: "})," "]}),Object(u.jsxs)("div",{className:"col",children:[N.fname," ",N.lname]})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col",children:Object(u.jsx)("strong",{children:"Amenities: "})}),Object(u.jsx)("div",{className:"col",children:I&&I.map((function(e){return Object(u.jsx)($,{resources:e},e.resourceId)}))})]})]})}),Object(u.jsx)(j.x,{className:"m-2",children:Object(u.jsxs)("div",{children:[Object(u.jsx)(j.o,{fas:!0,icon:"users"})," Attendees:",n.attendees&&n.attendees.map((function(e){return Object(u.jsx)(z,{attendees:e},e.user.userId)}))]})}),x.user?Object(u.jsxs)("div",{children:[M?Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"button",className:"btn btn-primary btn-lg m-2",onClick:function(){(function(e,t){return ce.apply(this,arguments)})(n.id,x.user.id).then(window.location.reload(!0)).catch((function(e){return console.log(e)}))},children:"Leave Event"})}):Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"button",className:"btn btn-primary btn-lg m-2",onClick:function(){var e=Object(h.a)({},L);e.eventId=n.id,e.userId=x.user.id,q(e),x.user.id!==n.organizerId&&n.attendees.length<n.capacity?function(e){return re.apply(this,arguments)}(e).then(window.location.reload(!0)).catch((function(e){return console.log(e)})):R(!0)},children:"Join Event"})})," "]}):"",K&&Object(u.jsx)("div",{className:"bg-danger text-white",children:"Cannot Join Event"}),Object(u.jsx)("div",{children:Object(u.jsx)("div",{children:x.user&&"ADMIN"===x.user.authorities[0]&&Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{type:"button",className:"btn btn-primary btn-lg m-2",onClick:function(){v("/confirmd/".concat(n.id))},children:"Delete Event"}),!n.status&&Object(u.jsx)("button",{type:"button",className:"btn btn-primary btn-lg m-2",onClick:function(){var e=Object(h.a)({},n);e.status=!0,B(e).then(window.location.reload(!0)).catch((function(e){return e.toString()}))},children:"Approve Event"})]})})}),Object(u.jsx)("div",{className:"flex-center md-6",children:Object(u.jsx)("iframe",{src:f,title:"googleMap",width:"1275",height:"450",frameborder:"0",style:{border:0},allowfullscreen:"","aria-hidden":"false",tabindex:"0"})})]})},ie="http://team07api-env.eba-jhiypzic.us-east-2.elasticbeanstalk.com:8080";function oe(e,t){return{method:e,headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)}}function le(){return(le=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ie,"/api/location"));case 2:if(200!==(t=e.sent).status){e.next=5;break}return e.abrupt("return",t.json());case 5:throw new Error("Could not fetch locations");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return de.apply(this,arguments)}function de(){return(de=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ie,"/api/location/").concat(t));case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.json());case 5:throw new Error("Could not fetch location");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(){return(je=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.id>0?me(t):be(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){return he.apply(this,arguments)}function he(){return(he=Object(O.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe("POST",t),e.next=3,fetch("".concat(ie,"/api/location"),n);case 3:if(201!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",r.json());case 6:throw new Error("Could not add location");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(O.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe("PUT",t),e.next=3,fetch("".concat(ie,"/api/location/").concat(t.id),n);case 3:if(204===e.sent.status){e.next=6;break}throw new Error("Could not update location");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=function(e){var t=e.event,n=Object(o.f)(),c=Object(r.useContext)(m),a=Object(r.useState)([]),s=Object(i.a)(a,2),l=s[0],d=s[1];function b(){n("/event/"+t.id)}var h=t.date.split("T");return h[1]=h[1].slice(0,5),Object(r.useEffect)((function(){ue(t.eventLocationId).then((function(e){return d(e)})).catch((function(e){return e.toString()}))})),Object(u.jsx)(j.m,{className:"m-2",children:Object(u.jsxs)(j.b,{style:{width:"300px"},className:"m-4 hover-shadow bg-image text-white  hover-zoom h-100 ",background:"dark",border:"light",shadow:"",children:[Object(u.jsx)(j.e,{src:t.imageUrl,className:"",onClick:b}),Object(u.jsxs)(j.c,{className:"",onClick:b,back:!0,children:[Object(u.jsxs)(j.g,{children:["  ",Object(u.jsxs)("strong",{children:[" ",t.title," "]})," "]}),Object(u.jsx)(j.f,{children:t.description})]}),Object(u.jsxs)(j.q,{onClick:b,className:"light",children:[Object(u.jsxs)(j.r,{color:"dark",children:["Date: ",h[0]]}),Object(u.jsxs)(j.r,{color:"dark",children:["Time: ",h[1]," "]}),Object(u.jsxs)(j.r,{color:"dark",children:["Event Capacity: ",t.capacity]}),Object(u.jsxs)(j.r,{color:"dark",background:"dark",children:[l.address,", ",l.city,", ",l.state]})]}),Object(u.jsxs)(j.d,{children:[c.user&&("ADMIN"===c.user.authorities[0]||c.user.id===t.organizerId)&&Object(u.jsx)("button",{type:"button",className:"btn btn-primary btn-lg m-2",onClick:function(){n("/edit/".concat(t.id))},children:"Edit Event"}),c.user&&"ADMIN"===c.user.authorities[0]&&Object(u.jsx)("button",{type:"button",className:"btn btn-primary btn-lg m-2",onClick:function(){n("/confirmd/".concat(t.id))},children:"Delete Event"})]})]})})};var Oe=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(i.a)(a,2),o=s[0],l=s[1],d=Object(r.useState)(""),b=Object(i.a)(d,2),h=b[0],m=b[1];return Object(r.useEffect)((function(){var e=Object(u.jsx)("div",{children:"No Results"});0===o.length&&0===h.length?P().then((function(e){var t=e.filter((function(e){return!0===e.status}));c(t)})):o.length>0&&function(e){return L.apply(this,arguments)}(o).then((function(e){var t=e.filter((function(e){return!0===e.status}));c(t)})).catch((function(t){return e})),h.length>0&&function(e){return U.apply(this,arguments)}(h).then((function(e){var t=e.filter((function(e){return!0===e.status}));c(t)})).catch((function(t){return e}))}),[o,h]),Object(u.jsx)(j.n,{fluid:!0,children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault()},color:"",children:[Object(u.jsx)("div",{className:"input-group m-3 text-white",children:"Search"}),Object(u.jsx)("div",{className:"input-group m-3",style:{width:500},children:Object(u.jsx)("div",{children:Object(u.jsx)(j.p,{type:"search",label:"Search Keyword",contrast:!0,className:"form-control text-white",value:o,onChange:function(e){l(e.target.value)},id:"keysearch"})})}),Object(u.jsx)("div",{className:"input-group m-3",style:{width:500},children:Object(u.jsx)("div",{children:Object(u.jsx)(j.p,{type:"search",label:"Search Category",className:"form-control",value:h,onChange:function(e){m(e.target.value)},id:"categorysearch",contrast:!0})})}),Object(u.jsx)(j.x,{className:"",children:n.map((function(e){return Object(u.jsx)(fe,{event:e},e.eventId)}))})]})})},xe=(n(24),n(25),{title:"",description:"",date:"",duration:"",capacity:"",eventLocationId:"",category:"",organizerId:"",imageUrl:""}),ve={id:"",title:"",city:"",address:"",zipcode:"",state:""},ge={resource:"",locationId:""};var we=function(){var e=Object(r.useState)(xe),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(ve),s=Object(i.a)(a,2),d=s[0],b=s[1],p=Object(o.g)().id,f=Object(o.f)(),O=Object(r.useContext)(m),x=Object(r.useState)(ge),v=Object(i.a)(x,2),g=v[0],w=v[1];function y(e){var t=Object(h.a)({},n),r=e.target.value;"number"===e.target.type&&(r=parseInt(r,10),isNaN(r)&&(r=e.target.value)),t[e.target.name]=r,c(t)}function N(e){var t=Object(h.a)({},d),n=e.target.value;"number"===e.target.type&&(n=parseInt(n,10),isNaN(n)&&(n=e.target.value)),t[e.target.name]=n,b(t)}Object(r.useEffect)((function(){p&&D(p).then((function(e){c(e),e.eventLocationId&&ue(e.eventLocationId).then((function(e){b(e),V(e.id).then((function(e){w(e[0])})).catch((function(e){return e}))})).catch((function(e){return f("/NotFound",e.ToString)}))})).catch((function(e){return f("/NotFound",e.ToString)}))}),[p,f]);var k="Add an Event",C="Add Event";return void 0!==p&&(k="Edit an Event",C="Edit Event"),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=!1,r="";(function(){return le.apply(this,arguments)})().then((function(e){if(e.forEach((function(e){e.address===d.address&&e.title===d.title&&d.city===e.city&&(t=!0,r=e.id)})),t){n.eventLocationId=r;var c=Object(h.a)({},n);c.organizerId!==O.user.id&&""!==c.organizerId||(c.organizerId=O.user.id),V(n.eventLocationId).then((function(e){Y(e[0].resourceId).catch((function(e){return f("/NotFound",console.log(e))}));var t=Object(h.a)({},g);t.resourceId=0,0!==t.resource.length&&Q(t).catch((function(e){return e.toString()}))})).catch((function(e){var t=Object(h.a)({},g);t.resourceId=0,t.locationId=n.eventLocationId,0!==t.resource.length&&Q(t).catch((function(e){return e.toString()}))})),_(c).then((function(){return f("/")})).catch((function(e){return e.toString()}))}else(function(e){return je.apply(this,arguments)})(d).then((function(e){var t=Object(h.a)({},n),r=Object(h.a)({},g);if(null!=e&&(t.eventLocationId=e.id,r.locationId=e.id),0!==r.resource.length)if(void 0===r.resourceId)Q(r);else{var c=Object(h.a)({},g);Y(r.resourceId).catch((function(e){return f("/NotFound",console.log(e))})),c.resourceId=0,Q(c)}t.organizerId!==O.user.id&&""!==t.organizerId||(t.organizerId=O.user.id),_(t).then((function(){return f("/")})).catch((function(e){return e.toString()}))})).catch((function(e){return f("/NotFound",console.log(e))}))}))},className:"text-white",children:[Object(u.jsx)("h2",{className:"text-left m-4 display-5",children:k}),Object(u.jsxs)("div",{className:"m-2",children:[Object(u.jsx)("div",{className:"m-4 w-25",children:Object(u.jsx)(j.p,{label:"Event Title",id:"title",name:"title",type:"text",size:"lg",className:"col form-control",contrast:!0,required:!0,value:n.title,onChange:y})}),Object(u.jsx)("div",{className:"m-4 w-50",children:Object(u.jsx)(j.p,{label:"Event Description",id:"description",contrast:!0,name:"description",type:"textarea",textarea:!0,rows:5,size:"lg",className:"col form-control",value:n.description,onChange:y})}),Object(u.jsx)("div",{className:"m-4 w-25",children:Object(u.jsx)(j.p,{label:"Category",id:"category",contrast:!0,name:"category",type:"text",size:"lg",className:"col form-control",required:!0,value:n.category,onChange:y})}),Object(u.jsxs)("div",{className:"m-4 ",children:[Object(u.jsx)("label",{className:"m-1",required:!0,children:"Start Date and Time:  "}),Object(u.jsx)("input",{type:"datetime-local",id:"date",name:"date",value:n.date,onChange:y,min:"2021-11-10T23:00:00"})]}),Object(u.jsx)("div",{className:"m-4 w-25",children:Object(u.jsx)(j.p,{label:"Event Duration (Minutes)",id:"duration",contrast:!0,name:"duration",type:"number",size:"lg",className:"col form-control",required:!0,value:n.duration,onChange:y,min:0,max:1e4})}),Object(u.jsx)("div",{className:"m-4 w-25",children:Object(u.jsx)(j.p,{label:"Capacity",id:"capacity",contrast:!0,name:"capacity",type:"number",size:"lg",className:"col form-control",required:!0,value:n.capacity,onChange:y,min:0})}),Object(u.jsx)("div",{className:"m-4",children:Object(u.jsx)(j.p,{label:"Image Url",id:"imageUrl",name:"imageUrl",type:"url",contrast:!0,size:"lg",className:"col form-control",value:n.imageUrl,onChange:y})})]}),Object(u.jsx)("h2",{className:"text-left m-4 display-5",children:"Location"}),Object(u.jsxs)("div",{className:"",children:[Object(u.jsx)("div",{className:"m-4 w-25",children:Object(u.jsx)(j.p,{label:"Location Title (ex: Cabin 2)",id:"title",name:"title",contrast:!0,type:"text",size:"lg",className:"col form-control",value:d.title,onChange:N})}),Object(u.jsx)("div",{className:"m-4 w-50",children:Object(u.jsx)(j.p,{label:"Address",id:"address",name:"address",type:"text",size:"lg",contrast:!0,className:"col form-control",value:d.address,onChange:N})}),Object(u.jsx)("div",{className:"m-4 w-25",children:Object(u.jsx)(j.p,{label:"City",id:"city",name:"city",type:"text",size:"lg",contrast:!0,className:"col form-control",required:!0,value:d.city,onChange:N})}),Object(u.jsx)("div",{className:"m-4 w-25",children:Object(u.jsx)(j.p,{label:"state",id:"state",name:"state",type:"text",size:"lg",contrast:!0,className:"col form-control",required:!0,value:d.state,onChange:N,maxLength:2})}),Object(u.jsx)("div",{className:"m-4 w-25",children:Object(u.jsx)(j.p,{label:"Zip Code",id:"zipcode",name:"zipcode",type:"number",contrast:!0,size:"lg",className:"col form-control",value:d.zipcode,onChange:N,min:0,max:99999})}),Object(u.jsx)("div",{className:"m-4 w-50",children:Object(u.jsx)(j.p,{label:"Amenities",id:"resource",name:"resource",type:"text",contrast:!0,textarea:!0,size:"lg",className:"col form-control",value:g.resource,onChange:function(e){var t=Object(h.a)({},g),n=e.target.value;"number"===e.target.type&&(n=parseInt(n,10),isNaN(n)&&(n=e.target.value)),t[e.target.name]=n,w(t)}})})]}),Object(u.jsx)(l.b,{to:"/",className:"m-4 btn btn-lg btn-outline-primary",children:"Cancel"}),Object(u.jsx)(j.a,{className:"m-4 btn btn-primary btn-lg",children:C})]})},ye=n(11);var Ne=function(){var e=Object(r.useContext)(m),t=Object(r.useState)([]),n=Object(i.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)([]),l=Object(i.a)(s,2),d=l[0],j=l[1],b=Object(o.f)();Object(r.useEffect)((function(){P().then((function(e){return a(e)})).catch((function(t){403===t?(e.logout(),b("/login")):b("/error",t.toString())})),e.user&&function(e){return te.apply(this,arguments)}(e.user.id).then((function(e){var t=[];if(0!==e.length){var n,r=Object(ye.a)(e);try{for(r.s();!(n=r.n()).done;){var c=n.value;t.push(D(c.eventId))}}catch(a){r.e(a)}finally{r.f()}Promise.all(t).then((function(e){return j(e)}))}})).catch((function(e){return e.toString()}))}),[e,b,d]);var h=function(){var t=[];return e.user&&(t=c.filter((function(e){return!0===e.status})).filter((function(t){return t.organizerId===e.user.id}))),t}(),p=function(){var t=[];return e.user&&(t=c.filter((function(e){return!1===e.status})).filter((function(t){return t.organizerId===e.user.id}))),t}();return Object(u.jsxs)("div",{className:"text-white",children:[Object(u.jsxs)("div",{className:"m-2",children:[Object(u.jsx)("h1",{className:"m-4",children:"My Events"}),Object(u.jsx)("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-4 g-3 m-2",children:d.map((function(e){return Object(u.jsx)(fe,{event:e},e.id)}))})]}),Object(u.jsxs)("div",{className:"m-2",children:[Object(u.jsx)("h1",{className:"m-4",children:"Organized: Accepted Events "}),Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-4 g-3 m-2",children:h.map((function(e){return Object(u.jsx)(fe,{event:e},e.id)}))})})]}),Object(u.jsxs)("div",{className:"m-2",children:[Object(u.jsx)("h1",{className:"m-4",children:"Organized: Pending Events "}),Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-4 g-3 m-2",children:p.map((function(e){return Object(u.jsx)(fe,{event:e},e.id)}))})})]})]})};var ke=function(){var e=Object(r.useContext)(m),t=Object(o.f)(),n=Object(o.g)().id,c=Object(r.useCallback)((function(n){403===n&&(e.logout(),n="Unauthorized"),t("/error",n.toString)}),[e,t]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"alert alert-danger",children:"This will completly delete this event. Are you sure?"}),Object(u.jsxs)("div",{className:"mt-2",children:[Object(u.jsx)("button",{className:"btn btn-danger me -1",onClick:function(){(function(e){return R.apply(this,arguments)})(n).then((function(){return t("/search")})).catch(c)},children:"Yes!"}),Object(u.jsx)(l.b,{to:"/search",className:"btn btn-secondary",children:"No, Cancel"})]})]})};var Ce=function(){var e=Object(r.useContext)(m),t=Object(r.useState)([]),n=Object(i.a)(t,2),c=n[0],a=n[1],s=Object(o.f)();Object(r.useEffect)((function(){P().then((function(e){return a(e)})).catch((function(t){403===t?(e.logout(),s("/login")):s("/error",t.toString())}))}),[e,s]);var l=function(){var e=[];return c.forEach((function(t){!1===t.status&&e.push(t)})),e}(),d=function(){var e=[];return c.forEach((function(t){!0===t.status&&e.push(t)})),e}();return Object(u.jsxs)("div",{className:"text-white",children:[Object(u.jsxs)("div",{className:"m-2",children:[Object(u.jsx)("h1",{className:"m-4",children:"Approved Events"}),Object(u.jsx)("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-4 g-3 m-2",children:d.map((function(e){return Object(u.jsx)(fe,{event:e},e.id)}))})]}),Object(u.jsxs)("div",{className:"m-2",children:[Object(u.jsx)("h1",{className:"m-4",children:"Pending Events "}),Object(u.jsx)("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-4 g-3 m-2",children:l.map((function(e){return Object(u.jsx)(fe,{event:e},e.id)}))})]})]})};var Ee=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){(function(){return N.apply(this,arguments)})().then((function(e){return c(e)})).catch((function(){return c()}))}),[]);var a={user:n,login:function(e){return c(e)},logout:function(){(function(){return y.apply(this,arguments)})().finally((function(){return c()}))}};return Object(u.jsx)("div",{style:{backgroundColor:"#1d1f47"},children:Object(u.jsx)(m.Provider,{value:a,children:Object(u.jsxs)(l.a,{children:[Object(u.jsx)(j.s,{expand:"sm",dark:!0,bgColor:"dark",sticky:!0,children:Object(u.jsxs)(j.n,{fluid:!0,children:[Object(u.jsx)(j.t,{className:"",href:"/",children:Object(u.jsx)("img",{src:"logo.png",className:"float-left",height:"50",alt:"site logo"})}),Object(u.jsxs)(j.w,{className:"me-auto mb-2 mb-lg-0",children:[Object(u.jsx)(j.u,{children:Object(u.jsx)(j.v,{href:"/",className:"ms-3 m-1",children:Object(u.jsx)("h5",{children:Object(u.jsx)("strong",{children:"Home"})})})}),Object(u.jsx)(j.u,{children:Object(u.jsx)(j.v,{href:"/search",className:"ms-3 m-1",children:Object(u.jsx)("h5",{children:Object(u.jsx)("strong",{children:"Search Events"})})})}),n?Object(u.jsx)("div",{children:Object(u.jsx)(j.u,{children:Object(u.jsx)(j.u,{children:Object(u.jsx)(j.v,{href:"/myevents",className:"ms-3 m-1",children:Object(u.jsx)("h5",{children:Object(u.jsx)("strong",{children:"My Events"})})})})})}):Object(u.jsx)("div",{}),n&&"ADMIN"===n.authorities[0]?Object(u.jsx)("div",{children:Object(u.jsx)(j.u,{children:Object(u.jsx)(j.u,{children:Object(u.jsx)(j.v,{href:"/adminevents",className:"ms-3 m-1",children:Object(u.jsx)("h5",{children:Object(u.jsx)("strong",{children:"Admin Events"})})})})})}):Object(u.jsx)("div",{})]}),n?Object(u.jsx)("div",{children:Object(u.jsx)(j.w,{right:!0,fullWidth:!1,className:"",children:Object(u.jsx)(j.a,{href:"/add",className:"btn btn-md btn-primary m-1",children:"Add"})})}):Object(u.jsx)("div",{}),n?Object(u.jsxs)(j.w,{left:!0,fullWidth:!1,children:[Object(u.jsxs)(j.u,{className:"text-success m-1",children:[Object(u.jsxs)(j.o,{color:"white",fas:!0,icon:"user-circle",className:"",children:[" ",n.username," "]}),"  "]}),Object(u.jsx)(j.u,{children:Object(u.jsx)(j.a,{type:"button",className:"btn btn-md btn-danger m-1",onClick:a.logout,children:"Logout"})})]}):Object(u.jsxs)(j.w,{right:!0,fullWidth:!1,children:[Object(u.jsx)(j.u,{children:Object(u.jsx)(j.a,{href:"/register",className:"btn btn-md btn m-2",color:"info",children:"Register"})}),Object(u.jsx)(j.u,{children:Object(u.jsx)(j.a,{href:"/login",className:"btn btn-md btn-primary m-2",children:"Login"})})]}),Object(u.jsx)(j.w,{right:!0,fullWidth:!1,children:Object(u.jsx)(j.u,{children:Object(u.jsx)(j.a,{className:"m-1",style:{backgroundColor:"#ed302f"},href:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",children:Object(u.jsx)(j.o,{fab:!0,icon:"youtube"})})})})]})}),Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{path:"/",element:Object(u.jsx)(b,{})}),Object(u.jsx)(o.a,{path:"/event/:eventId",element:Object(u.jsx)(se,{})}),Object(u.jsx)(o.a,{path:"/login",element:Object(u.jsx)(k,{})}),Object(u.jsx)(o.a,{path:"/search",element:Object(u.jsx)(Oe,{})}),Object(u.jsx)(o.a,{path:"/register",element:Object(u.jsx)(I,{})}),Object(u.jsx)(o.a,{path:"/add",element:Object(u.jsx)(we,{})}),Object(u.jsx)(o.a,{path:"/myevents",element:Object(u.jsx)(Ne,{})}),Object(u.jsx)(o.a,{path:"/confirmd/:id",element:Object(u.jsx)(ke,{})}),Object(u.jsx)(o.a,{path:"/adminevents",element:Object(u.jsx)(Ce,{})}),Object(u.jsx)(o.a,{path:"/edit/:id",element:Object(u.jsx)(we,{})}),Object(u.jsx)(o.a,{path:"*",element:Object(u.jsx)(d,{})})]})]})})})};s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(Ee,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.f552516f.chunk.js.map